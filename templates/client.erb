client

<% ports.sort.each do |key,val| -%>
remote <%= ip %> <%= val["port"] == "" ? defaults["port"] : val["port"] %> <%= val["proto"] == "" ? defaults["proto"] : val["proto"] %>
<% end #ports each -%>

ca /var/lib/puppet/ssl/certs/ca.pem
cert /var/lib/puppet/ssl/certs/<%= fqdn.downcase %>.pem
key /var/lib/puppet/ssl/private_keys/<%= fqdn.downcase %>.pem
tls-auth /etc/openvpn/puppet-keys/ta.key 1

cipher AES-256-CBC
auth RSA-SHA
tls-cipher DHE-RSA-AES256-SHA
remote-cert-eku "TLS Web Server Authentication"

log-append /var/log/openvpn/client-<%= ip %>.log
status /var/log/openvpn/client-<%= ip %>.status 1
status-version 1
verb 4

user openvpn
group openvpn
persist-key
persist-tun
script-security 1
daemon

dev tun
comp-lzo
nobind
socket-flags TCP_NODELAY
